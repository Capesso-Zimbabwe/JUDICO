<!-- Task Form Modal Template -->
<div
  class="relative bg-white rounded-lg shadow dark:bg-gray-700 w-full max-w-2xl mx-auto"
>
  <!-- Modal header -->
  <div
    class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"
  >
    <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
      {% if task %}Edit Task{% else %}Add New Task{% endif %}
    </h3>
    <button
      type="button"
      class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"
      data-modal-hide="new-modal"
    >
      <svg
        class="w-3 h-3"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 14 14"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"
        />
      </svg>
      <span class="sr-only">Close modal</span>
    </button>
  </div>
  <!-- Modal body -->
  <div class="p-2 md:p-3 space-y-4 max-h-[60vh] overflow-y-auto">
    <form
      novalidate="novalidate"
      method="post"
      {%
      if
      task
      %}hx-post="{% url 'task_management:task_update' task.id %}"
      hx-target="#update-modal-container"
      {%
      else
      %}hx-post="{% url 'task_management:task_create' %}"
      hx-target="#new-modal-container"
      {%
      endif
      %}
      class=""
    >
      {% csrf_token %}
      <div class="p-2 md:p-3 space-y-4 max-h-[60vh] overflow-y-auto">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          {% include 'components/non-field-errors.html' %}<!-- Task Title -->{%
          include 'components/field.html' with field=form.title
          field_widget_class="col-span-2" %}<!-- Client Field -->{% include
          'components/field.html' with field=form.client %}<!-- Assigned To Field -->{%
          include 'components/field.html' with field=form.assigned_to %}<!-- Status Field -->{%
          include 'components/field.html' with field=form.status %}<!-- Priority Field -->{%
          include 'components/field.html' with field=form.priority %}<!-- Due Date Field -->{%
          include 'components/field.html' with field=form.due_date
          field_widget_class="col-span-2" %}<!-- Description Field -->{% include
          'components/field.html' with field=form.description
          field_widget_class="col-span-2" %}
        </div>
      </div>
      <div
        class="flex justify-end space-x-3 pt-3 py-2 px-3 border-t border-gray-200"
      >
        <div>
          {% if not task %}{% include 'components/submit-button.html' with
          button_text="Create Task" loading_text="Creating...." %}{% else %}{%
          include 'components/submit-button.html' with button_text="Update Task"
          loading_text="Updating...." %}{% endif %}
        </div>
      </div>
    </form>
  </div>
</div>
