{% extends 'finance_management/base.html' %}

{% block title %}Financial Report - Finance Management{% endblock %}

{% block header_title %}Financial Report{% endblock %}

{% block finance_content %}
    <div class="bg-white rounded-sm shadow-md flex flex-col overflow-hidden flex-1 max-w-full max-h-full">

        <!-- Header Section -->
        <div class="bg-white px-6 py-4 border-b border-gray-200">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-lg font-semibold text-gray-900">Financial Report</h1>
                    <p class="text-sm text-gray-600">Main Campus Dormitory</p>
                </div>
                <div class="flex gap-2">
                    <button class="px-3 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50">
                        <i class="fas fa-edit mr-1"></i> Edit
                    </button>
                    <button class="px-3 py-1 text-xs bg-gray-800 text-white rounded hover:bg-gray-700">
                        <i class="fas fa-download mr-1"></i> Export
                    </button>
                </div>
            </div>
        </div>

        <!-- Month Selection and Quick Select -->
        <div class="bg-white px-6 py-3 border-b border-gray-200">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <div>
                        <label class="block text-xs font-medium text-gray-700 mb-1">Select Months</label>
                        <div class="flex gap-1">
                            <button class="px-2 py-1 text-xs bg-blue-600 text-white rounded">Jan</button>
                            <button class="px-2 py-1 text-xs bg-blue-600 text-white rounded">Feb</button>
                            <button class="px-2 py-1 text-xs bg-blue-600 text-white rounded">Mar</button>
                            <button class="px-2 py-1 text-xs bg-blue-600 text-white rounded">Apr</button>
                            <button class="px-2 py-1 text-xs bg-blue-600 text-white rounded">May</button>
                            <button class="px-2 py-1 text-xs bg-blue-600 text-white rounded">Jun</button>
                            <button class="px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50">Jul</button>
                            <button class="px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50">Aug</button>
                            <button class="px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50">Sep</button>
                            <button class="px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50">Oct</button>
                            <button class="px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50">Nov</button>
                            <button class="px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50">Dec</button>
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-gray-700 mb-1">Boarding House</label>
                        <div class="flex items-center gap-2">
                            <input type="checkbox" id="consolidated" class="text-xs">
                            <label for="consolidated" class="text-xs text-gray-700">Consolidated Report</label>
                        </div>
                        <select class="mt-1 text-xs border border-gray-300 rounded px-2 py-1">
                            <option>Main Campus Dormitory</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-xs font-medium text-gray-700 mb-1">Quick Select</label>
                    <div class="grid grid-cols-2 gap-1 text-xs">
                        <button class="px-2 py-1 border border-gray-300 rounded hover:bg-gray-50">Q1</button>
                        <button class="px-2 py-1 border border-gray-300 rounded hover:bg-gray-50">Q2</button>
                        <button class="px-2 py-1 border border-gray-300 rounded hover:bg-gray-50">Q3</button>
                        <button class="px-2 py-1 border border-gray-300 rounded hover:bg-gray-50">Q4</button>
                        <button class="px-2 py-1 border border-gray-300 rounded hover:bg-gray-50">H1</button>
                        <button class="px-2 py-1 border border-gray-300 rounded hover:bg-gray-50">H2</button>
                        <button class="px-2 py-1 border border-gray-300 rounded hover:bg-gray-50 col-span-2">Full Year</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Financial Report Table -->
        <div class="p-0 overflow-hidden flex flex-col flex-1 max-w-full max-h-full">
            <div class="compact-table flex-1 max-w-full max-h-full scrollbar-thin overflow-auto relative">
                <table class="w-full text-xs" id="financialReportTable">
                    <thead class="bg-gray-50 sticky top-0 z-10">
                        <tr>
                            <th class="px-4 py-2 text-left font-semibold text-gray-900 border-b border-gray-200 w-48">
                                Account
                            </th>
                            <th class="px-3 py-2 text-center font-semibold text-gray-900 border-b border-gray-200 w-20">
                                Jan
                            </th>
                            <th class="px-3 py-2 text-center font-semibold text-gray-900 border-b border-gray-200 w-20">
                                Feb
                            </th>
                            <th class="px-3 py-2 text-center font-semibold text-gray-900 border-b border-gray-200 w-20">
                                Mar
                            </th>
                            <th class="px-3 py-2 text-center font-semibold text-gray-900 border-b border-gray-200 w-20">
                                Apr
                            </th>
                            <th class="px-3 py-2 text-center font-semibold text-gray-900 border-b border-gray-200 w-20">
                                May
                            </th>
                            <th class="px-3 py-2 text-center font-semibold text-gray-900 border-b border-gray-200 w-20">
                                Jun
                            </th>
                        </tr>
                    </thead>
                    <tbody class="bg-white">
                        <!-- REVENUE Section -->
                        <tr class="bg-gray-100">
                            <td class="px-4 py-2 font-bold text-gray-900 border-b border-gray-200" colspan="7">
                                REVENUE
                            </td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-2 text-gray-900 border-b border-gray-100">Rental Income</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$75,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$75,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$75,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$75,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$75,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$75,000</td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-2 text-gray-900 border-b border-gray-100">Accounts Receivable</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$34,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$34,500</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$43,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$15,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$39,500</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$37,800</td>
                        </tr>
                        <tr class="bg-gray-50 font-semibold">
                            <td class="px-4 py-2 text-gray-900 border-b border-gray-200">Total Revenue</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-200">$109,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-200">$109,500</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-200">$118,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-200">$90,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-200">$114,500</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-200">$112,800</td>
                        </tr>
                        
                        <!-- EXPENSES Section -->
                        <tr class="bg-gray-100">
                            <td class="px-4 py-2 font-bold text-gray-900 border-b border-gray-200" colspan="7">
                                EXPENSES
                            </td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-2 text-gray-900 border-b border-gray-100">Utilities - Electricity</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$8,500</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$8,200</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$7,800</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$7,500</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$8,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$8,800</td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-2 text-gray-900 border-b border-gray-100">Utilities - Water</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$3,200</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$3,100</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$3,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$2,900</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$3,100</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$3,300</td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-2 text-gray-900 border-b border-gray-100">Internet & Cable</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$1,500</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$1,500</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$1,500</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$1,500</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$1,500</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$1,500</td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-2 text-gray-900 border-b border-gray-100">Maintenance & Repairs</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$2,800</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$3,200</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$2,500</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$3,800</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$2,200</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$2,900</td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-2 text-gray-900 border-b border-gray-100">Cleaning Supplies</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$800</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$850</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$900</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$750</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$800</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$850</td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-2 text-gray-900 border-b border-gray-100">Security Services</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$2,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$2,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$2,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$2,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$2,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$2,000</td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-2 text-gray-900 border-b border-gray-100">Insurance</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$1,200</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$1,200</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$1,200</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$1,200</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$1,200</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$1,200</td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-2 text-gray-900 border-b border-gray-100">Property Tax</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$1,500</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$0</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$0</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$0</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$0</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$1,500</td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-2 text-gray-900 border-b border-gray-100">Staff Salaries</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$12,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$12,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$12,500</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$12,500</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$13,000</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$13,000</td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-2 text-gray-900 border-b border-gray-100">Food & Kitchen Supplies</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$8,500</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$8,800</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$9,200</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$9,500</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$9,800</td>
                            <td class="px-3 py-2 text-right text-gray-900 border-b border-gray-100">$10,200</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Pagination -->
    {% include 'components/paginator.html' with page_obj=page_obj %}



{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Modal initialization code removed
});

function filterIncome(status) {
    const form = document.getElementById('search-form');
    const url = new URL(window.location);
    if (status) {
        url.searchParams.set('status', status);
    } else {
        url.searchParams.delete('status');
    }
    window.location.href = url.toString();
}

function viewInvoice(invoiceId) {
    window.location.href = `/finance/invoices/${invoiceId}/`;
}

function editInvoice(invoiceId) {
    window.location.href = `/finance/invoices/${invoiceId}/edit/`;
}



// Search functionality
document.getElementById('search-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const searchValue = this.search.value;
    const url = new URL(window.location);
    if (searchValue) {
        url.searchParams.set('search', searchValue);
    } else {
        url.searchParams.delete('search');
    }
    window.location.href = url.toString();
});
</script>
{% endblock %}